{"version":3,"sources":["components/Navigation/Navigation.module.css","components/UserMenu/UserMenu.module.css","components/AuthNav/AuthNav.module.css","redux/contacts/contacts-actions.js","redux/contacts/contacts-reducer.js","components/AppBar/AppBar.module.css","redux/contacts/contacts-operations.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","components/PrivateRoute.js","components/PublicRoute.js","components/Navigation/Navigation.js","components/UserMenu/default-avatar.png","components/UserMenu/UserMenu.js","components/AuthNav/AuthNav.js","components/AppBar/AppBar.js","App.js","redux/store.js","index.js"],"names":["module","exports","filterContacts","createAction","checkUniqName","items","createReducer","fetchContacts","fulfilled","_","payload","addContact","state","deleteContact","filter","contact","id","action","loading","pending","rejected","error","combineReducers","axios","defaults","baseURL","createAsyncThunk","a","get","response","data","post","delete","contactsOperations","token","headers","common","Authorization","register","credentials","rejectWithValue","message","logIn","console","log","operations","logOut","fetchCurrentUser","thunkAPI","getState","persistedToken","auth","authSelectors","getIsLoggedIn","isLoggedIn","getUsername","user","name","getIsFetchingCurrentUser","isFetchingCurrentUser","getAuthError","authSlice","createSlice","initialState","email","extraReducers","authOperations","PrivateRoute","children","redirectTo","routeProps","useSelector","to","PublicRoute","restricted","shouldRedirect","Navigation","exact","className","s","link","activeClassName","active","UserMenu","dispatch","useDispatch","avatar","defaultAvatar","container","src","alt","width","Button","exit","variant","color","onClick","AuthNav","activeLink","AppBar","header","HomeView","lazy","RegisterView","LoginView","ContactsView","NotFoundView","App","userName","useEffect","fallback","notify","show","path","component","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","authPersistConfig","key","storage","blacklist","whitelist","store","configureStore","reducer","contacts","contactReducer","persistReducer","authReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f35f8a6b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__3hogt\",\"active\":\"Navigation_active__102OZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__2QpqN\",\"avatar\":\"UserMenu_avatar__34Evj\",\"name\":\"UserMenu_name__20J17\",\"exit\":\"UserMenu_exit__VH_QS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__2d6AI\",\"activeLink\":\"AuthNav_activeLink__3lg-H\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const fetchContactRequest = createAction('contacts/fetchContactRequest');\nexport const fetchContactSuccess = createAction('contacts/fetchContactSuccess');\nexport const fetchContactError = createAction('contacts/fetchContactError');\n\nexport const addContactRequest = createAction('contacts/addContactRequest');\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\nexport const addContactError = createAction('contacts/addContactError');\n\nexport const deleteContactRequest = createAction(\n  'contacts/deleteContactRequest',\n);\nexport const deleteContactSuccess = createAction(\n  'contacts/deleteContactSuccess',\n);\nexport const deleteContactError = createAction('contacts/deleteContactError');\n\nexport const filterContacts = createAction('contacts/filter');\nexport const checkUniqName = createAction('contacts/uniqName');\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { filterContacts, checkUniqName } from './contacts-actions';\nimport {\n  fetchContacts,\n  addContact,\n  deleteContact,\n} from './contacts-operations';\n\nconst items = createReducer([], {\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(contact => contact.id !== payload),\n  [checkUniqName]: state => state,\n});\n\nconst filter = createReducer('', {\n  [filterContacts]: (_, action) => action.payload,\n});\n\nconst loading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n  // [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n});\n\nconst error = createReducer(null, {\n  [fetchContacts.pending]: () => null,\n  [fetchContacts.rejected]: (_, { payload }) => payload,\n  [fetchContacts.rejected]: (_, { payload }) => payload,\n  [addContact.pending]: () => null,\n  [addContact.rejected]: (_, { payload }) => payload,\n  [deleteContact.pending]: () => null,\n  [deleteContact.rejected]: (_, { payload }) => payload,\n});\n\nexport default combineReducers({\n  items,\n  filter,\n  loading,\n  error,\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__2gnCw\"};","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://goit-phonebook-api.herokuapp.com';\n\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async () => {\n    const response = await axios.get('/contacts');\n    return response.data;\n  },\n);\n\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n  async contact => {\n    const response = await axios.post('/contacts', contact);\n    return response.data;\n  },\n);\n\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n  async id => {\n    await axios.delete(`/contacts/${id}`);\n    return id;\n  },\n);\n\nconst contactsOperations = {\n  fetchContacts,\n  addContact,\n  deleteContact,\n};\nexport default contactsOperations;\n","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://goit-phonebook-api.herokuapp.com';\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nconst register = createAsyncThunk(\n  'auth/register',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n\nconst logIn = createAsyncThunk(\n  'auth/login',\n  async (credentials, { rejectWithValue }) => {\n    try {\n      const { data } = await axios.post('/users/login', credentials);\n      console.log('data', data);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n\nconst logOut = createAsyncThunk(\n  'auth/logout',\n  async (_, { rejectWithValue }) => {\n    try {\n      await axios.post('/users/logout');\n      token.unset();\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n\nconst fetchCurrentUser = createAsyncThunk(\n  'auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persistedToken = state.auth.token;\n\n    if (persistedToken === null) {\n      console.log('Токена нет, уходим из fetchCurrentUser');\n      console.log(thunkAPI.rejectWithValue());\n      return thunkAPI.rejectWithValue();\n    }\n    token.set(persistedToken);\n    try {\n      const { data } = await axios.get('/users/current');\n      console.log('data', data);\n      return data;\n    } catch (error) {\n      console.log('error', error);\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  },\n);\n\nconst operations = {\n  register,\n  logOut,\n  logIn,\n  fetchCurrentUser,\n};\nexport default operations;\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nconst getUsername = state => state.auth.user.name;\n\nconst getIsFetchingCurrentUser = state => state.auth.isFetchingCurrentUser;\n\nconst getAuthError = state => state.auth.error;\n\nconst authSelectors = {\n  getIsLoggedIn,\n  getUsername,\n  getIsFetchingCurrentUser,\n  getAuthError,\n};\nexport default authSelectors;\n","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operations';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  isFetchingCurrentUser: false,\n  error: null,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.register.pending](state) {\n      state.error = null;\n    },\n    [authOperations.register.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.register.rejected](state, action) {\n      state.error = action.payload;\n    },\n\n    [authOperations.logIn.pending](state) {\n      state.error = null;\n    },\n    [authOperations.logIn.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logIn.rejected](state, action) {\n      state.error = action.payload;\n    },\n\n    [authOperations.logOut.pending](state) {\n      state.error = null;\n    },\n    [authOperations.logOut.fulfilled](state) {\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n    },\n    [authOperations.logOut.rejected](state, action) {\n      state.error = action.payload;\n    },\n\n    [authOperations.fetchCurrentUser.pending](state) {\n      state.error = null;\n      state.isFetchingCurrentUser = true;\n    },\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\n      state.user = action.payload;\n      state.isLoggedIn = true;\n      state.isFetchingCurrentUser = false;\n    },\n    [authOperations.fetchCurrentUser.rejected](state) {\n      state.isFetchingCurrentUser = false;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n","import { Redirect, Route } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { authSelectors } from 'redux/auth';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <Route {...routeProps}>\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\n    </Route>\n  );\n}\n","import { Redirect, Route } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { authSelectors } from 'redux/auth';\n\nexport default function PublicRoute({\n  children,\n  redirectTo = '/contacts',\n  restricted = false,\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  const shouldRedirect = isLoggedIn && restricted;\n\n  return (\n    <Route {...routeProps}>\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\n    </Route>\n  );\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { authSelectors } from '../../redux/auth';\nimport s from './Navigation.module.css';\n\nconst Navigation = () => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <nav>\n      <NavLink to=\"/\" exact className={s.link} activeClassName={s.active}>\n        Главная\n      </NavLink>\n\n      {isLoggedIn && (\n        <NavLink to=\"/contacts\" className={s.link} activeClassName={s.active}>\n          Контакты\n        </NavLink>\n      )}\n    </nav>\n  );\n};\n\nexport default Navigation;\n","export default __webpack_public_path__ + \"static/media/default-avatar.e44fc4e2.png\";","import { useDispatch, useSelector } from 'react-redux';\nimport { authSelectors, authOperations } from '../../redux/auth';\nimport defaultAvatar from './default-avatar.png';\nimport s from './UserMenu.module.css';\nimport Button from '@material-ui/core/Button';\n\nexport default function UserMenu() {\n  const dispatch = useDispatch();\n  const name = useSelector(authSelectors.getUsername);\n  const avatar = defaultAvatar;\n\n  return (\n    <div className={s.container}>\n      <img src={avatar} alt=\"\" width=\"32\" className={s.avatar} />\n      <span className={s.name}>Добро пожаловать, {name}</span>\n      <Button\n        className={s.exit}\n        // type=\"button\"\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() => dispatch(authOperations.logOut())}\n      >\n        Выйти\n      </Button>\n    </div>\n  );\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport s from './AuthNav.module.css';\n\nexport default function AuthNav() {\n  return (\n    <div>\n      <NavLink\n        to=\"/register\"\n        exact\n        className={s.link}\n        activeClassName={s.activeLink}\n      >\n        Регистрация\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        exact\n        className={s.link}\n        activeClassName={s.activeLink}\n      >\n        Логин\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport Navigation from '../Navigation';\nimport UserMenu from '../UserMenu';\nimport AuthNav from '../AuthNav';\nimport { authSelectors } from '../../redux/auth';\nimport s from './AppBar.module.css';\n\nexport default function AppBar() {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  return (\n    <header className={s.header}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </header>\n  );\n}\n","import { useEffect, Suspense, lazy } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { authOperations, authSelectors } from 'redux/auth';\n\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport AppBar from './components/AppBar';\nimport Notifications, { notify } from 'react-notify-toast';\n\nconst HomeView = lazy(() => import('./pages/HomeView'));\nconst RegisterView = lazy(() => import('./pages/RegisterView'));\nconst LoginView = lazy(() => import('./pages/LoginView'));\nconst ContactsView = lazy(() => import('./pages/ContactsView'));\nconst NotFoundView = lazy(() => import('./pages/NotFoundView'));\n\nfunction App() {\n  const dispatch = useDispatch();\n  const userName = useSelector(authSelectors.getUsername);\n  const isFetchingCurrentUser = useSelector(\n    authSelectors.getIsFetchingCurrentUser,\n  );\n  const error = useSelector(authSelectors.getAuthError);\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    !isFetchingCurrentUser && (\n      <>\n        <AppBar />\n        <Suspense fallback={<p>Загрузка...</p>}>\n          <Notifications />\n          {error && notify.show(error, 'error', 2000)}\n          <Switch>\n            <PublicRoute exact path=\"/\">\n              <HomeView name={userName ? userName : 'незнакомец'} />\n            </PublicRoute>\n            <PublicRoute path=\"/register\" redirectTo=\"/contacts\" restricted>\n              <RegisterView />\n            </PublicRoute>\n            <PublicRoute path=\"/login\" redirectTo=\"/contacts\" restricted>\n              <LoginView />\n            </PublicRoute>\n            <PrivateRoute path=\"/contacts\" redirectTo=\"/\">\n              <ContactsView />\n            </PrivateRoute>\n            <Route component={NotFoundView} />\n          </Switch>\n        </Suspense>\n      </>\n    )\n  );\n}\n\nexport default App;\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport logger from 'redux-logger';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport contactReducer from './contacts/contacts-reducer';\nimport { authReducer } from './auth';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n  logger,\n];\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  blacklist: ['_persist'],\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    contacts: contactReducer,\n    auth: persistReducer(authPersistConfig, authReducer),\n  },\n  devTools: process.env.NODE_ENV === 'development',\n  middleware,\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport './index.css';\nimport App from './App';\nimport { store, persistor } from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}